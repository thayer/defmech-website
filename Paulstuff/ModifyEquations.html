<HTML>
<HEAD>
<title>Modify Equations</title>
</HEAD>
<BODY>

<META Main form, where users view/edit display options.>


<FORM name="equations" id="equations">
<TABLE>
  <TBODY>
  <TR>
    <TD width="4%"></TD>
    <TD></TD><TD></TD>
    <TD> <INPUT type="button" onClick=varKey() value="Variables key"> &nbsp; &nbsp; &nbsp;
    <INPUT type="button" onClick=opsKey() value="Operations key"> </TD></TR>
  <TR>
    <TD width="4%"></TD>
    <TD align=middle><B> Name </B></TD>
    <TD align=middle></TD>
    <TD align=middle><B> Equation </B></TD></TR>
  <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n1 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e1 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n2 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e2 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n3 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e3 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n4 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e4 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n5 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e5 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n6 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e6 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n7 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e7 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n8 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e8 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n9 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e9 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n10 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e10 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n11 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e11 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n12 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e12 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n13 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e13 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n14 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e14 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n15 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e15 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n16 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e16 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n17 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e17 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n18 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e18 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n19 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e19 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n20 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e20 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n21 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e21 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n22 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e22 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n23 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e23 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><INPUT name=n24 size="15"></TD>
    <TD> = </TD>
    <TD><INPUT name=e24 size="130" > </TD> </TR>
 <TR>
    <TD width="4%"></TD>
    <TD width="30%"><b>GammaDotTotal</b></TD>
    <TD> = </TD>
    <TD><INPUT name=e25 size="130" > </TD> </TR>

</TBODY></TABLE>
    <INPUT onclick=restoreDefaults() type=button value="Restore Defaults">
<p><p>
<TABLE><TBODY>
<TR>
    <TD width="50%"></TD>
    <TD><INPUT onclick=cancel() type=button value=Cancel>
</TD>
    <TD><INPUT onclick=validate() type=button value=Submit>
</TD></TR>
</TBODY>
</TABLE>
</FORM>

<META Call the javascript that handles the validation of data, checker.js>
<SCRIPT src = "checker.js" language = "JavaScript"></SCRIPT>

<META Call the javascript that handles the conversion to prefix notation, and back again>
<SCRIPT src = "prefix_conversion.js" language = "JavaScript"></SCRIPT>

<SCRIPT language=JavaScript>

<!--

// Put current values into form.
	var interactiveE1Index=0;
	for (interactiveE1Index=0; window.opener.newMap[interactiveE1Index].name!="e1"; interactiveE1Index=interactiveE1Index+1);  // Find e1 in interactive.html
	var interactiveIter=interactiveE1Index;
	var equationsIter=2;   // 2 is the equations form index of n1.
	var iter=0;
	while (interactiveIter<24+interactiveE1Index) {
		document.equations[equationsIter].value = window.opener.nameForm[iter].value;
		document.equations[equationsIter+1].value = window.opener.newMap[interactiveIter].value;
		equationsIter = equationsIter+2;
		interactiveIter = interactiveIter+1;
		iter = iter+1;
	}
	document.equations[equationsIter].value = window.opener.newMap[interactiveIter].value;  // GammaDotTotal value


   // getCookie is used to get the DispOptionsCookie cookie, which communicates the current display options
   //   from interactive.html to this page.

   // getCookie function taken from http://www.cookiecentral.com/faq/#5.2
   function getCookie(name) {
         var cookie = " " + document.cookie;
         var search = " " + name + "=";
         var setStr = null;
         var offset = 0;
         var end = 0;
         if (cookie.length > 0) {
                 offset = cookie.indexOf(search);
                 if (offset != -1) {
                         offset += search.length;
                         end = cookie.indexOf(";", offset)
                         if (end == -1) {
                                 end = cookie.length;
                         }
                         setStr = unescape(cookie.substring(offset, end));
                 }
         }
         return (setStr);
   }




// -----------------------------------------------------

// The following javascript functions handle the form's buttons.

function varKey()
{
  window.open("varsKey.html");
}
function opsKey()
{
  window.open("opsKey.html");
}


function restoreDefaults()
// Put default values into form.
{
   document.equations.n1.value = "Mu";
   document.equations.e1.value = "Mu0*1000000*(1+((T-300)/Tm)*TempDepOfModulus)";
   document.equations.n2.value = "As";
   document.equations.e2.value = "A*(sqrt(3)^(n+1))";
   document.equations.n3.value = "Dcore";
   document.equations.e3.value = "AcD0core*exp(-Qcore*1000/(8.3145*T))";
   document.equations.n4.value = "Common12";
   document.equations.e4.value = "As*Mu*b/(1.3807E-23*T)*(NShear^n)";
   document.equations.n5.value = "Dv";
   document.equations.e5.value = "D0v*exp(-Qv*1000/(8.3145*T))";
   document.equations.n6.value = "DeltaDb";
   document.equations.e6.value = "DeltaD0b*exp(-Qb*1000/(8.3145*T))";
   document.equations.n7.value = "GammaDot1";
   document.equations.e7.value = "Dv*Common12";
   document.equations.n8.value = "GammaDot2";
   document.equations.e8.value = "10/(b^2)*(NShear^2)*Dcore*Common12";
   document.equations.n9.value = "Common34";
   document.equations.e9.value = "42*Mu*NShear*Omega/((d^2)*1.3807E-23*T)";
   document.equations.n10.value = "GammaDot3";
   document.equations.e10.value = "Dv*Common34";
   document.equations.n11.value = "GammaDot4";
   document.equations.e11.value = "3.14159265358979323846/d*DeltaDb*Common34";
   document.equations.n12.value = "GammaDot0";
   document.equations.e12.value = "1E6";
   document.equations.n13.value = "GammaDot5";
   document.equations.e13.value = "GammaDot0*exp(-1*DeltaF/(1.3807E-23*T)*(1-(NShear/TauHat)))";
   document.equations.n14.value = "GammaDot6";
   document.equations.e14.value = "NShear^2*GammaDotP*exp(-1*5E-25/(1.3807E-23*T)*(1-(Mu*NShear/(Mu0*1000000*TauHat)^(3/4))^(4/3)))";
   document.equations.n15.value = "";
   document.equations.e15.value = "";
   document.equations.n16.value = "";
   document.equations.e16.value = "";
   document.equations.n17.value = "";
   document.equations.e17.value = "";
   document.equations.n18.value = "";
   document.equations.e18.value = "";
   document.equations.n19.value = "";
   document.equations.e19.value = "";

   document.equations.e25.value = "max(GammaDot1+GammaDot2+GammaDot3+GammaDot4,min(GammaDot5,GammaDot6))";
}

function cancel()
// Close the form without updating newMap's values.
{
   close();
}

// Used by validate() to make the expressions array. Taken from http://developer.netscape.com/viewsource/goodman_arrays.html
function makeArray(length) {
   this.length = length
     for (var i = 1; i <= length; i++) {
        this[i] = null
     }
   return this
}

var exp = new makeArray(25);

function validate()
// Validate data, and store in newMap if valid.
{
   for (var iter=0; iter<24; iter++) {
   	  exp[iter]=convert(document.equations[iter*2+3].value, iter);
/*   	  if (exp[iter].indexOf("~")!=-1) {
   	  	confirm (document.equations[iter*2+3].value + " goes to " + exp[iter]);
   	  } */
   	  if (exp[iter].indexOf("BAD INPUT")!=-1) {
   	     alert ("Cannot submit - error");
   	     return;
   	  }
   }
/*   exp[iter] = convert(document.equations[iter*2+3].value, iter);
   if (exp[24].indexOf("BAD INPUT")!=-1) {
   	     alert ("Cannot submit - error");
   	     return;
   }
*/
   // Everything has been successfully validated, put into newMap and close the window.
   interactiveIter=interactiveE1Index;
   iter=0;
   equationsIter = 2;
   while (interactiveIter<24+interactiveE1Index) {
       window.opener.nameForm[iter].value = document.equations[equationsIter].value;  // name
       window.opener.newMap[interactiveIter].value = exp[iter];  // value
       iter = iter +1;
       interactiveIter = interactiveIter +1;
       equationsIter = equationsIter + 2;
   }

   close();

}


// -->

</SCRIPT>
</BODY></HTML>